<!-- -*- mode: jinja2 -*- -->

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta name="description" content="Tree based Elemental Mesh">
    <meta name="author" content="University of Siegen" >
    <link rel="icon" href="../favicon.png">

    <title>Face Details &ndash; Treelm</title>

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <!-- Font Awesome -->
    <link href="../css/fontawesome.min.css" rel="stylesheet">
    <link href="../css/brands.min.css" rel="stylesheet">
    <link href="../css/regular.min.css" rel="stylesheet">
    <link href="../css/solid.min.css" rel="stylesheet">
    <link href="../css/v4-font-face.min.css" rel="stylesheet">
    <link href="../css/v4-shims.min.css" rel="stylesheet">
    <!-- MathJax -->
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        TeX: { equationNumbers: { autoNumber: "AMS" } }
      });
    </script>
    <script src="https://cdn.jsdelivr.net/npm/mathjax@2.7.9/MathJax.js?config=TeX-AMS-MML_HTMLorMML" async
            integrity="sha256-DViIOMYdwlM/axqoGDPeUyf0urLoHMN4QACBKyB58Uw=" crossorigin="anonymous"></script>
    <!-- Other scripts and stylesheets -->
    <link href="../css/local.css" rel="stylesheet">
    <link href="../css/pygments.css" rel="stylesheet">
    <script src="../js/svg-pan-zoom.min.js"></script>
  </head>

  <body>

    <!-- Fixed navbar -->
    <div class="container-fluid mb-sm-4 mb-xl-2">
      <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
        <div class="container">
          <a class="navbar-brand" href="../index.html">Treelm </a>
          <button type="button" class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#navbar"
                  aria-expanded="false" aria-controls="navbar" aria-label="Toggle navigation">
                  <span class="navbar-toggler-icon">
          </button>

          <div id="navbar" class="navbar-collapse collapse">
            <ul class="navbar-nav">
                <li class="nav-item"><a class="nav-link" href="index.html">TreElm Overview</a></li>
                  <li class="nav-item">
                    <a class="nav-link" href="../lists/files.html">Source Files</a>
                  </li>
                <li class="nav-item">
                  <a class="nav-link" href="../lists/modules.html">Modules</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="../lists/procedures.html">Procedures</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="../lists/absint.html">Abstract Interfaces</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="../lists/types.html">Derived Types</a>
                </li>
            </ul>
              <div class="d-flex align-items-end flex-grow-1">
                <form action="../search.html" role="search" class="ms-auto">
                  <input type="text" class="form-control" aria-label="Search" placeholder="Search" name="q" id="tipue_search_input" autocomplete="off" required>
                </form>
              </div>
          </div><!--/.nav-collapse -->
        </div>
      </nav>
    </div>

    <div class="container">
  <div class="row">
    <h1>Face Details</h1>
    <div class="container p-2 mb-4 bg-light border rounded-3">
      <div class="row align-items-center justify-content-between">
        <div class="col">
          <ul class="list-inline" style="margin-bottom:0px; display:inline">
          </ul>
        </div>
        <div class="col">
          <nav aria-label="breadcrumb">
            <ol class="breadcrumb justify-content-end mb-0">
                <li class="breadcrumb-item"><a href='index.html'>TreElm Overview</a></li>
              <li class="breadcrumb-item active" aria-current="page">Face Details</li>
            </ol>
          </nav>
        </div>
      </div>
    </div>
  </div>

  <div class="row">
      <div class="col-3">
        <div class="card card-body bg-light" id="sidebar-toc">
          <ul class="nav flex-column align-items">
            <li class="nav-item">
              <a class="nav-link" href="index.html">TreElm Overview</a>
            </li>
          </ul>
          <hr>
          <nav class="nav nav-pills flex-column">
              <a class="nav-link" href="DataConcept.html">Data Concept</a>
              <a class="nav-link" href="bibliography.html">Bibliography</a>
              <a class="nav-link" href="codingGuidelines.html">Coding Guidelines</a>
              <a class="nav-link active disabled" href="face_details.html">Face Details</a>
              <a class="nav-link" href="features/index.html">Feature Overview</a>
                <nav class="nav nav-pills flex-column">
                                <a class="nav-link" href="features/canonicalShapes.html">Canonical Shapes</a>
              <a class="nav-link" href="features/dynamic.html">Dynamic data structures</a>
              <a class="nav-link" href="features/spacetimefunctions.html">Space-Time functions</a>
              <a class="nav-link" href="features/tem_construction_example_stencil.html">Example for the stencil construction</a>
              <a class="nav-link" href="features/tracking.html">Tracking Module Description</a>
              <a class="nav-link" href="features/variables/index.html">Variable System</a>
                <nav class="nav nav-pills flex-column">
                                <a class="nav-link" href="features/variables/const.html">Defining variables with constant values</a>
              <a class="nav-link" href="features/variables/fun.html">Using Lua functions for space time functions</a>
              <a class="nav-link" href="features/variables/mus_predefined.html">Predefined Fortran functions in MUSUBI</a>
              <a class="nav-link" href="features/variables/operations.html">Operations inside the variable system</a>

                </nav>

                </nav>
              <a class="nav-link" href="fileformat.html">Treelm File Format</a>
              <a class="nav-link" href="implementation.html">Implementation in the APES Framework</a>
              <a class="nav-link" href="motivation.html">Motivation for the TreElm Library</a>
              <a class="nav-link" href="octree.html">Distributed Octree</a>
              <a class="nav-link" href="requirements.html">Requirements</a>
          </nav>
        </div>
      </div>

    <div class="col-9" id='text'>
      <h1 id="details-and-examples-for-the-face-module">Details and examples for the Face Module</h1>
<p>This page describes some face configurations as they may appear in the
<a href="../module/tem_face_module.html">tem_face_module</a> in more detail.</p>
<h2 id="serial-face-description-no-level-jumps">Serial face description (no level jumps)</h2>
<p>In case of a serial execution the only face situation that can occur is:</p>
<div class="codehilite"><pre><span></span><code><span class="c">       </span><span class="nb">---------------------------------------</span>
<span class="c">      /                  /                  /</span>
<span class="c">     /                  /                  /</span>
<span class="c">    /      rank 0      /      rank 0      /</span>
<span class="c">   /                  /                  /</span>
<span class="c">  /                  /                  /</span>
<span class="c">  </span><span class="nb">--------------------------------------</span>
</code></pre></div>

<p>All fluid-fluid faces are compute faces.</p>
<h2 id="parallel-face-descritption-no-level-jumps">Parallel face descritption (no level jumps)</h2>
<p>In the case of parallel execution without local refinements,
the only additional face situation that can occur is:</p>
<div class="codehilite"><pre><span></span><code><span class="c">       </span><span class="nb">---------------------------------------</span>
<span class="c">      /                  /                  /</span>
<span class="c">     /                  /                  /</span>
<span class="c">    /      rank 0      /      rank 1      /</span>
<span class="c">   /                  /                  /</span>
<span class="c">  /                  /                  /</span>
<span class="c">  </span><span class="nb">--------------------------------------</span>
</code></pre></div>

<p>In this situation the rank that owns the left element is the one that
computes the face.</p>
<p>So on rank 0 we have the following situation:</p>
<div class="codehilite"><pre><span></span><code>                      compute face
                           /
       ---------------------------------------
      /                  /                  /
     /                  /                  /
    /                  /                  /
   /                  /                  /
  /                  /                  /
  --------------------------------------
</code></pre></div>

<p>Therefore, rank 1 will send face information in the computation and the
siuation is:</p>
<div class="codehilite"><pre><span></span><code><span class="w">                         </span><span class="k">send</span><span class="w"> </span><span class="nv">face</span>
<span class="w">                           </span><span class="o">/</span>
<span class="w">       </span><span class="o">---------------------------------------</span>
<span class="w">      </span><span class="o">/</span><span class="w">                  </span><span class="o">/</span><span class="w">                  </span><span class="o">/</span>
<span class="w">     </span><span class="o">/</span><span class="w">                  </span><span class="o">/</span><span class="w">                  </span><span class="o">/</span>
<span class="w">    </span><span class="o">/</span><span class="w">                  </span><span class="o">/</span><span class="w">                  </span><span class="o">/</span>
<span class="w">   </span><span class="o">/</span><span class="w">                  </span><span class="o">/</span><span class="w">                  </span><span class="o">/</span>
<span class="w">  </span><span class="o">/</span><span class="w">                  </span><span class="o">/</span><span class="w">                  </span><span class="o">/</span>
<span class="w">  </span><span class="o">--------------------------------------</span>
</code></pre></div>

<h2 id="parallel-face-description-with-level-jumps">Parallel face description with level jumps</h2>
<p>In parallel a set of level-jumb-partition-bnd face combinations may occur.
Below, you can find a collection of thse cases (with one level difference)
and how they are categorized.</p>
<h3 id="mesh-setup">Mesh setup</h3>
<p>The faces are categorized by dimension-by-dimension level descriptors.
Therefore, it is sufficient to consider the different face combinations in
a single spatial direction. Here, we restrict ourselves without loss of
generalty to the x direction. The situation we want to consider is the
following:</p>
<div class="codehilite"><pre><span></span><code><span class="c">       </span><span class="nb">---------------------------------------</span>
<span class="c">      /        /         /                  /</span>
<span class="c">     /        /         /                  /</span>
<span class="c">    /</span><span class="nb">------------------</span><span class="c">/                  /</span>
<span class="c">   /        /         /                  /</span>
<span class="c">  /        /         /                  /</span>
<span class="c">  </span><span class="nb">--------------------------------------</span>
</code></pre></div>

<p>In the following the numbers in the elements will represent the rank the
element is located on.</p>
<h3 id="example-rank-setup-1">Example Rank Setup 1</h3>
<div class="codehilite"><pre><span></span><code><span class="c">       </span><span class="nb">---------------------------------------</span>
<span class="c">      /   1    /    1    /                  /</span>
<span class="c">     /        /         /                  /</span>
<span class="c">    /</span><span class="nb">------------------</span><span class="c">/        0         /</span>
<span class="c">   /   1    /    1    /                  /</span>
<span class="c">  /        /         /                  /</span>
<span class="c">  </span><span class="nb">--------------------------------------</span>
</code></pre></div>

<h4 id="layout-on-rank-0">Layout on rank 0:</h4>
<div class="codehilite"><pre><span></span><code><span class="w">                       </span><span class="nv">from</span><span class="w"> </span><span class="nv">finer</span><span class="w"> </span><span class="nv">face</span>
<span class="w">                           </span><span class="o">/</span>
<span class="w">       </span><span class="o">---------------------------------------</span>
<span class="w">      </span><span class="o">/</span><span class="w">                  </span><span class="o">/</span><span class="w">                  </span><span class="o">/</span>
<span class="w">     </span><span class="o">/</span><span class="w">                  </span><span class="o">/</span><span class="w">                  </span><span class="o">/</span>
<span class="w">    </span><span class="o">/</span><span class="w">                  </span><span class="o">/</span><span class="w">                  </span><span class="o">/</span><span class="w">           </span><span class="nv">coarse</span><span class="w"> </span><span class="nv">level</span>
<span class="w">   </span><span class="o">/</span><span class="w">                  </span><span class="o">/</span><span class="w">                  </span><span class="o">/</span>
<span class="w">  </span><span class="o">/</span><span class="w">                  </span><span class="o">/</span><span class="w">                  </span><span class="o">/</span>
<span class="w">  </span><span class="o">--------------------------------------</span>
<span class="w">       </span><span class="o">---------------------------------------</span>
<span class="w">      </span><span class="o">/</span><span class="w">        </span><span class="o">/</span><span class="w">         </span><span class="o">/</span><span class="w">        </span><span class="o">/</span><span class="w">         </span><span class="o">/</span>
<span class="w">     </span><span class="o">/</span><span class="w">        </span><span class="o">/</span><span class="w">         </span><span class="o">/</span><span class="w">        </span><span class="o">/</span><span class="w">         </span><span class="o">/</span>
<span class="w">    </span><span class="o">/------------------/------------------/</span><span class="w">           </span><span class="nv">fine</span><span class="w"> </span><span class="nv">level</span>
<span class="w">   </span><span class="o">/</span><span class="w">        </span><span class="o">/</span><span class="w">         </span><span class="o">/</span><span class="w">        </span><span class="o">/</span><span class="w">         </span><span class="o">/</span>
<span class="w">  </span><span class="o">/</span><span class="w">        </span><span class="o">/</span><span class="w">         </span><span class="o">/</span><span class="w">        </span><span class="o">/</span><span class="w">         </span><span class="o">/</span>
<span class="w">  </span><span class="o">--------------------------------------</span>
<span class="w">                   </span><span class="o">/</span>
<span class="w">              </span><span class="k">send</span><span class="w"> </span><span class="nv">face</span>
</code></pre></div>

<h4 id="layout-on-rank-1">Layout on rank 1:</h4>
<div class="codehilite"><pre><span></span><code>           neither fromFinerFace nor receive face
                           /
       -------------------- - - - - - - - - -
      /                  /                  /
     /                  /                  /
    /                  /                              coarse level
   /                  /
  /                  /
  -------------------
       ---------------------------------------
      /        /         /        /         /
     /        /         /        /         /
    /------------------/------------------/           fine level
   /        /         /        /         /
  /        /         /        /         /
  --------------------------------------
                   /
           compute + recv faces
</code></pre></div>

<div class="alert alert-info">
<p class="alert-title h4">Note</p>
<p>Please notice, that this situation is covered (compute + recv) on
the finest face level of rank 1 although the fine elements are located on a
single remote rank from the perspective of rank 0. This is in contrast to the
behavior of the level descriptor where the information is covered on the
coarsest level as possible.</p>
</div>
<h3 id="example-rank-setup-2">Example Rank Setup 2</h3>
<div class="codehilite"><pre><span></span><code><span class="c">       </span><span class="nb">---------------------------------------</span>
<span class="c">      /   1    /    1    /                  /</span>
<span class="c">     /        /         /                  /</span>
<span class="c">    /</span><span class="nb">------------------</span><span class="c">/        0         /</span>
<span class="c">   /   2    /    1    /                  /</span>
<span class="c">  /        /         /                  /</span>
<span class="c">  </span><span class="nb">--------------------------------------</span>
</code></pre></div>

<h4 id="layout-on-rank-0_1">Layout on rank 0:</h4>
<div class="codehilite"><pre><span></span><code>                       fromFinerFace
                           /
       ---------------------------------------
      /                  /                  /
     /                  /                  /
    /                  /                  /           coarse level
   /                  /                  /
  /                  /                  /
  --------------------------------------
       ---------------------------------------
      /        /         /        /         /
     /        /         /        /         /
    /------------------/------------------/           fine level
   /        /         /        /         /
  /        /         /        /         /
  --------------------------------------
                   /
                sendFaces
</code></pre></div>

<h4 id="layout-on-rank-1_1">Layout on rank 1:</h4>
<div class="codehilite"><pre><span></span><code><span class="c">       </span><span class="nb">---------------------------------------</span>
<span class="c">      /        /         /        /         /</span>
<span class="c">     /        /         /        /         /</span>
<span class="c">    /</span><span class="nb">------------------</span><span class="c">/</span><span class="nb">------------------</span><span class="c">/           fine level</span>
<span class="c">   /        /         /        /         /</span>
<span class="c">  /        /         /        /         /</span>
<span class="c">          </span><span class="nb">------------------------------</span>
<span class="c">                   /</span>
<span class="c">       receive and compute faces</span>
</code></pre></div>

<h4 id="layout-on-rank-2">Layout on rank 2:</h4>
<div class="codehilite"><pre><span></span><code>       -                ----                --
      /                  /                  /
     /                  /                  /
    /---------         /                  /           fine level
   /        /         /                  /
  /        /         /                  /
  -------------------------------------
</code></pre></div>

<h3 id="example-rank-setup-3">Example Rank Setup 3</h3>
<div class="codehilite"><pre><span></span><code><span class="c">       </span><span class="nb">---------------------------------------</span>
<span class="c">      /   1    /    1    /                  /</span>
<span class="c">     /        /         /                  /</span>
<span class="c">    /</span><span class="nb">------------------</span><span class="c">/        0         /</span>
<span class="c">   /   1    /    2    /                  /</span>
<span class="c">  /        /         /                  /</span>
<span class="c">  </span><span class="nb">--------------------------------------</span>
</code></pre></div>

<h4 id="layout-on-rank-0_2">Layout on rank 0:</h4>
<div class="codehilite"><pre><span></span><code><span class="w">                      </span><span class="nv">from</span><span class="w"> </span><span class="nv">finer</span><span class="w"> </span><span class="nv">face</span>
<span class="w">                          </span><span class="o">/</span>
<span class="w">       </span><span class="o">---------------------------------------</span>
<span class="w">      </span><span class="o">/</span><span class="w">                  </span><span class="o">/</span><span class="w">                  </span><span class="o">/</span>
<span class="w">     </span><span class="o">/</span><span class="w">                  </span><span class="o">/</span><span class="w">                  </span><span class="o">/</span>
<span class="w">    </span><span class="o">/</span><span class="w">                  </span><span class="o">/</span><span class="w">                  </span><span class="o">/</span><span class="w">           </span><span class="nv">coarse</span><span class="w"> </span><span class="nv">level</span>
<span class="w">   </span><span class="o">/</span><span class="w">                  </span><span class="o">/</span><span class="w">                  </span><span class="o">/</span>
<span class="w">  </span><span class="o">/</span><span class="w">                  </span><span class="o">/</span><span class="w">                  </span><span class="o">/</span>
<span class="w">  </span><span class="o">--------------------------------------</span>
<span class="w">       </span><span class="o">---------------------------------------</span>
<span class="w">      </span><span class="o">/</span><span class="w">        </span><span class="o">/</span><span class="w">         </span><span class="o">/</span><span class="w">        </span><span class="o">/</span><span class="w">         </span><span class="o">/</span>
<span class="w">     </span><span class="o">/</span><span class="w">        </span><span class="o">/</span><span class="w">         </span><span class="o">/</span><span class="w">        </span><span class="o">/</span><span class="w">         </span><span class="o">/</span>
<span class="w">    </span><span class="o">/------------------/------------------/</span><span class="w">           </span><span class="nv">fine</span><span class="w"> </span><span class="nv">level</span>
<span class="w">   </span><span class="o">/</span><span class="w">        </span><span class="o">/</span><span class="w">         </span><span class="o">/</span><span class="w">        </span><span class="o">/</span><span class="w">         </span><span class="o">/</span>
<span class="w">  </span><span class="o">/</span><span class="w">        </span><span class="o">/</span><span class="w">         </span><span class="o">/</span><span class="w">        </span><span class="o">/</span><span class="w">         </span><span class="o">/</span>
<span class="w">  </span><span class="o">--------------------------------------</span>
<span class="w">                   </span><span class="o">/</span>
<span class="w">              </span><span class="k">send</span><span class="w"> </span><span class="nv">face</span>
</code></pre></div>

<h4 id="layout-on-rank-1_2">Layout on rank 1:</h4>
<div class="codehilite"><pre><span></span><code>       ---------------------------------------
      /        /         /        /         /
     /        /         /        /         /
    /------------------/------------------/           fine level
   /                  /                  /
  /                  /                  /
                  -----
                   /
       receive and compute faces
</code></pre></div>

<h4 id="layout-on-rank-2_1">Layout on rank 2:</h4>
<div class="codehilite"><pre><span></span><code>                        ----
      /                  /                  /
     /                  /                  /
    /------------------/------------------/           fine level
   /        /         /        /         /
  /        /         /        /         /
  --------------------------------------
                   /
       receive and compute faces
</code></pre></div>

<h2 id="parallel-face-description-with-multi-level-jumps">Parallel face description with multi-level-jumps</h2>
<p>Mesh setup (with multiple level difference)</p>
<p>As a simple example we will consider face description for the following mesh
setup.</p>
<div class="codehilite"><pre><span></span><code><span class="c">          </span><span class="nb">---------------------------------------------------</span>
<span class="c">         /     /      /     /     /                        /</span>
<span class="c">        /</span><span class="nb">-----</span><span class="c">/</span><span class="nb">------</span><span class="c">/</span><span class="nb">-----</span><span class="c">/</span><span class="nb">-----</span><span class="c">/                        /</span>
<span class="c">       /     /      /     /     /                        /</span>
<span class="c">      /</span><span class="nb">-----</span><span class="c">/</span><span class="nb">------</span><span class="c">/</span><span class="nb">-----</span><span class="c">/</span><span class="nb">-----</span><span class="c">/                        /</span>
<span class="c">     /     /      /     /     /                        /</span>
<span class="c">    /</span><span class="nb">-----</span><span class="c">/</span><span class="nb">------</span><span class="c">/</span><span class="nb">-----</span><span class="c">/</span><span class="nb">-----</span><span class="c">/                        /</span>
<span class="c">   /     /      /     /     /                        /</span>
<span class="c">  </span><span class="nb">--------------------------------------------------</span>
</code></pre></div>

<p>i.e. in our analysis we have to consider the following layers:</p>
<div class="codehilite"><pre><span></span><code><span class="c">          </span><span class="nb">---------------------------------------------------</span>
<span class="c">         /                        /                        /</span>
<span class="c">        /                        /                        /</span>
<span class="c">       /                        /                        /      coarse level</span>
<span class="c">      /                        /                        /</span>
<span class="c">     /                        /                        /</span>
<span class="c">    /                        /                        /</span>
<span class="c">   /                        /                        /</span>
<span class="c">  </span><span class="nb">--------------------------------------------------</span>
<span class="c">          </span><span class="nb">---------------------------------------------------</span>
<span class="c">         /            /           /           /            /</span>
<span class="c">        /            /           /           /            /</span>
<span class="c">       /            /           /           /            /</span>
<span class="c">      /</span><span class="nb">------------</span><span class="c">/</span><span class="nb">-----------</span><span class="c">/</span><span class="nb">-----------</span><span class="c">/</span><span class="nb">------------</span><span class="c">/   intermediate level (not existing elements)</span>
<span class="c">     /            /           /           /            /</span>
<span class="c">    /            /           /           /            /</span>
<span class="c">   /            /           /           /            /</span>
<span class="c">  </span><span class="nb">--------------------------------------------------</span>
<span class="c">          </span><span class="nb">---------------------------------------------------</span>
<span class="c">         /     /      /     /     /     /     /     /      /</span>
<span class="c">        /</span><span class="nb">-----</span><span class="c">/</span><span class="nb">------</span><span class="c">/</span><span class="nb">-----</span><span class="c">/</span><span class="nb">-----</span><span class="c">/</span><span class="nb">-----</span><span class="c">/</span><span class="nb">-----</span><span class="c">/</span><span class="nb">-----</span><span class="c">/</span><span class="nb">------</span><span class="c">/</span>
<span class="c">       /     /      /     /     /     /     /     /      /</span>
<span class="c">      /</span><span class="nb">-----</span><span class="c">/</span><span class="nb">------</span><span class="c">/</span><span class="nb">-----</span><span class="c">/</span><span class="nb">-----</span><span class="c">/</span><span class="nb">-----</span><span class="c">/</span><span class="nb">-----</span><span class="c">/</span><span class="nb">-----</span><span class="c">/</span><span class="nb">------</span><span class="c">/      fine level</span>
<span class="c">     /     /      /     /     /     /     /     /      /</span>
<span class="c">    /</span><span class="nb">-----</span><span class="c">/</span><span class="nb">------</span><span class="c">/</span><span class="nb">-----</span><span class="c">/</span><span class="nb">-----</span><span class="c">/</span><span class="nb">-----</span><span class="c">/</span><span class="nb">-----</span><span class="c">/</span><span class="nb">-----</span><span class="c">/</span><span class="nb">------</span><span class="c">/</span>
<span class="c">   /     /      /     /     /     /     /     /      /</span>
<span class="c">  </span><span class="nb">--------------------------------------------------</span>
</code></pre></div>

<h3 id="example-rank-setup-1_1">Example Rank Setup 1</h3>
<p>The first setup considers two particiapting ranks. Rank 0 holds the
coarse element and rank 1 all the fine elements.</p>
<div class="codehilite"><pre><span></span><code><span class="c">          </span><span class="nb">---------------------------------------------------</span>
<span class="c">         /     /      /     /  1  /                        /</span>
<span class="c">        /</span><span class="nb">-----</span><span class="c">/</span><span class="nb">------</span><span class="c">/</span><span class="nb">-----</span><span class="c">/</span><span class="nb">-----</span><span class="c">/                        /</span>
<span class="c">       /     /      /     /  1  /                        /</span>
<span class="c">      /</span><span class="nb">-----</span><span class="c">/</span><span class="nb">------</span><span class="c">/</span><span class="nb">-----</span><span class="c">/</span><span class="nb">-----</span><span class="c">/           0            /</span>
<span class="c">     /     /      /     /  1  /                        /</span>
<span class="c">    /</span><span class="nb">-----</span><span class="c">/</span><span class="nb">------</span><span class="c">/</span><span class="nb">-----</span><span class="c">/</span><span class="nb">-----</span><span class="c">/                        /</span>
<span class="c">   /     /      /     /  1  /                        /</span>
<span class="c">  </span><span class="nb">--------------------------------------------------</span>
</code></pre></div>

<h4 id="layout-on-rank-0_3">Layout on rank 0:</h4>
<p>Please notice, that in this situation rank 0 is interpolating the
face information downwards to the fine level before sending the
face information to rank 1.
Overall, on rank 0 the sitation looks like this:</p>
<div class="codehilite"><pre><span></span><code><span class="w">          </span><span class="o">---------------------------------------------------</span>
<span class="w">         </span><span class="o">/</span><span class="w">                        </span><span class="o">/</span><span class="w">                        </span><span class="o">/</span>
<span class="w">        </span><span class="o">/</span><span class="w">                        </span><span class="o">/</span><span class="w">                        </span><span class="o">/</span>
<span class="w">       </span><span class="o">/</span><span class="w">                        </span><span class="o">/</span><span class="w">                        </span><span class="o">/</span><span class="w">        </span><span class="nv">coarse</span><span class="w"> </span><span class="nv">level</span>
<span class="w">      </span><span class="o">/</span><span class="w">                        </span><span class="o">/</span><span class="w">                        </span><span class="o">/</span>
<span class="w">     </span><span class="o">/</span><span class="w">                        </span><span class="o">/</span><span class="w">                        </span><span class="o">/</span>
<span class="w">    </span><span class="o">/</span><span class="w">                        </span><span class="o">/</span><span class="w">                        </span><span class="o">/</span>
<span class="w">   </span><span class="o">/</span><span class="w">                        </span><span class="o">/</span><span class="w">                        </span><span class="o">/</span>
<span class="w">  </span><span class="o">--------------------------------------------------</span>
<span class="w">     </span><span class="nv">halo</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nv">from</span><span class="w"> </span><span class="nv">finer</span><span class="w">    </span><span class="o">/</span><span class="w">        </span><span class="nv">fluid</span><span class="w"> </span><span class="nv">element</span>
<span class="w">       </span><span class="nv">element</span><span class="w">           </span><span class="o">/</span>
<span class="w">                 </span><span class="nv">from</span><span class="w"> </span><span class="nv">finer</span><span class="w"> </span><span class="nv">face</span>

<span class="w">          </span><span class="o">---------------------------------------------------</span>
<span class="w">         </span><span class="o">/</span><span class="w">            </span><span class="o">/</span><span class="w">           </span><span class="o">/</span><span class="w">           </span><span class="o">/</span><span class="w">            </span><span class="o">/</span>
<span class="w">        </span><span class="o">/</span><span class="w">            </span><span class="o">/</span><span class="w">           </span><span class="o">/</span><span class="w">           </span><span class="o">/</span><span class="w">            </span><span class="o">/</span>
<span class="w">       </span><span class="o">/</span><span class="w">            </span><span class="o">/</span><span class="w">           </span><span class="o">/</span><span class="w">           </span><span class="o">/</span><span class="w">            </span><span class="o">/</span>
<span class="w">      </span><span class="o">/------------/-----------/-----------/------------/</span><span class="w">   </span><span class="nv">intermediate</span><span class="w"> </span><span class="nv">level</span>
<span class="w">     </span><span class="o">/</span><span class="w">            </span><span class="o">/</span><span class="w">           </span><span class="o">/</span><span class="w">           </span><span class="o">/</span><span class="w">            </span><span class="o">/</span>
<span class="w">    </span><span class="o">/</span><span class="w">            </span><span class="o">/</span><span class="w">           </span><span class="o">/</span><span class="w">           </span><span class="o">/</span><span class="w">            </span><span class="o">/</span>
<span class="w">   </span><span class="o">/</span><span class="w">            </span><span class="o">/</span><span class="w">           </span><span class="o">/</span><span class="w">           </span><span class="o">/</span><span class="w">            </span><span class="o">/</span>
<span class="w">  </span><span class="o">--------------------------------------------------</span>
<span class="w">     </span><span class="nv">halo</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nv">from</span><span class="w"> </span><span class="nv">finer</span><span class="w">    </span><span class="o">/</span><span class="w">       </span><span class="nv">ghost</span><span class="w"> </span><span class="nv">from</span><span class="w"> </span><span class="nv">coarser</span>
<span class="w">        </span><span class="nv">elements</span><span class="w">         </span><span class="o">/</span><span class="w">            </span><span class="nv">elements</span>
<span class="w">                   </span><span class="nv">from</span><span class="w"> </span><span class="nv">finer</span><span class="w"> </span><span class="nv">face</span>

<span class="w">          </span><span class="o">---------------------------------------------------</span>
<span class="w">         </span><span class="o">/</span><span class="w">     </span><span class="o">/</span><span class="w">      </span><span class="o">/</span><span class="w">     </span><span class="o">/</span><span class="w">     </span><span class="o">/</span><span class="w">     </span><span class="o">/</span><span class="w">     </span><span class="o">/</span><span class="w">     </span><span class="o">/</span><span class="w">      </span><span class="o">/</span>
<span class="w">        </span><span class="o">/-----/------/-----/-----/-----/-----/-----/------/</span>
<span class="w">       </span><span class="o">/</span><span class="w">     </span><span class="o">/</span><span class="w">      </span><span class="o">/</span><span class="w">     </span><span class="o">/</span><span class="w">     </span><span class="o">/</span><span class="w">     </span><span class="o">/</span><span class="w">     </span><span class="o">/</span><span class="w">     </span><span class="o">/</span><span class="w">      </span><span class="o">/</span>
<span class="w">      </span><span class="o">/-----/------/-----/-----/-----/-----/-----/------/</span><span class="w">           </span><span class="nv">fine</span><span class="w"> </span><span class="nv">level</span>
<span class="w">     </span><span class="o">/</span><span class="w">     </span><span class="o">/</span><span class="w">      </span><span class="o">/</span><span class="w">     </span><span class="o">/</span><span class="w">     </span><span class="o">/</span><span class="w">     </span><span class="o">/</span><span class="w">     </span><span class="o">/</span><span class="w">     </span><span class="o">/</span><span class="w">      </span><span class="o">/</span>
<span class="w">    </span><span class="o">/-----/------/-----/-----/-----/-----/-----/------/</span>
<span class="w">   </span><span class="o">/</span><span class="w">     </span><span class="o">/</span><span class="w">      </span><span class="o">/</span><span class="w">     </span><span class="o">/</span><span class="w">     </span><span class="o">/</span><span class="w">     </span><span class="o">/</span><span class="w">     </span><span class="o">/</span><span class="w">     </span><span class="o">/</span><span class="w">      </span><span class="o">/</span>
<span class="w">  </span><span class="o">--------------------------------------------------</span>
<span class="w">      </span><span class="nv">halo</span><span class="w"> </span><span class="nv">elements</span><span class="w">       </span><span class="o">/</span><span class="w">      </span><span class="nv">ghost</span><span class="w"> </span><span class="nv">from</span><span class="w"> </span><span class="nv">coarser</span>
<span class="w">                         </span><span class="o">/</span><span class="w">          </span><span class="nv">elements</span>
<span class="w">                     </span><span class="k">send</span><span class="w"> </span><span class="nv">face</span>
</code></pre></div>

<h4 id="layout-on-rank-1_3">Layout on rank 1:</h4>
<p>Rank 1 will receive the face information on the finest element level and
computes it.
However, it will NOT do any interpolation for the remote rank 0.</p>
<div class="alert alert-info">
<p class="alert-title h4">Note</p>
<p>This is in contrast to the level descriptor where the elements
           are communicating on the coarsest element level. The faces will
           always communicate on the fineste level.</p>
</div>
<div class="codehilite"><pre><span></span><code><span class="w">          </span><span class="o">-----------------------------</span>
<span class="w">         </span><span class="o">/</span><span class="w">                        </span><span class="o">/</span>
<span class="w">        </span><span class="o">/</span><span class="w">                        </span><span class="o">/</span>
<span class="w">       </span><span class="o">/</span><span class="w">                        </span><span class="o">/</span><span class="w">                                 </span><span class="nv">coarse</span><span class="w"> </span><span class="nv">level</span>
<span class="w">      </span><span class="o">/</span><span class="w">                        </span><span class="o">/</span>
<span class="w">     </span><span class="o">/</span><span class="w">                        </span><span class="o">/</span>
<span class="w">    </span><span class="o">/</span><span class="w">                        </span><span class="o">/</span>
<span class="w">   </span><span class="o">/</span><span class="w">                        </span><span class="o">/</span><span class="w">                        </span><span class="o">/</span>
<span class="w">  </span><span class="o">--------------------------------------------------</span>
<span class="w">     </span><span class="nv">ghost</span><span class="w"> </span><span class="nv">from</span><span class="w"> </span><span class="nv">finer</span><span class="w">     </span><span class="o">/</span><span class="w">        </span><span class="nv">not</span><span class="w"> </span><span class="nv">existing</span><span class="w"> </span><span class="nv">elem</span>.
<span class="w">       </span><span class="nv">element</span><span class="w">           </span><span class="o">/</span>
<span class="w">                 </span><span class="nv">no</span><span class="w"> </span><span class="nv">action</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nv">this</span><span class="w"> </span><span class="nv">face</span>

<span class="w">          </span><span class="o">---------------------------------------------------</span>
<span class="w">         </span><span class="o">/</span><span class="w">            </span><span class="o">/</span><span class="w">           </span><span class="o">/</span><span class="w">           </span><span class="o">/</span><span class="w">            </span><span class="o">/</span>
<span class="w">        </span><span class="o">/</span><span class="w">            </span><span class="o">/</span><span class="w">           </span><span class="o">/</span>
<span class="w">       </span><span class="o">/</span><span class="w">            </span><span class="o">/</span><span class="w">           </span><span class="o">/</span>
<span class="w">      </span><span class="o">/------------/-----------/--</span><span class="w">                          </span><span class="nv">intermediate</span><span class="w"> </span><span class="nv">level</span>
<span class="w">     </span><span class="o">/</span><span class="w">            </span><span class="o">/</span><span class="w">           </span><span class="o">/</span>
<span class="w">    </span><span class="o">/</span><span class="w">            </span><span class="o">/</span><span class="w">           </span><span class="o">/</span>
<span class="w">   </span><span class="o">/</span><span class="w">            </span><span class="o">/</span><span class="w">           </span><span class="o">/</span><span class="w">           </span><span class="o">/</span><span class="w">            </span><span class="o">/</span>
<span class="w">  </span><span class="o">--------------------------------------------------</span>
<span class="w">      </span><span class="nv">ghost</span><span class="w"> </span><span class="nv">from</span><span class="w"> </span><span class="nv">finer</span><span class="w">    </span><span class="o">/</span><span class="w">       </span><span class="nv">not</span><span class="w"> </span><span class="nv">existing</span><span class="w"> </span><span class="nv">elem</span>.
<span class="w">        </span><span class="nv">elements</span><span class="w">         </span><span class="o">/</span>
<span class="w">                </span><span class="nv">no</span><span class="w"> </span><span class="nv">action</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nv">this</span><span class="w"> </span><span class="nv">face</span>

<span class="w">          </span><span class="o">---------------------------------------------------</span>
<span class="w">         </span><span class="o">/</span><span class="w">     </span><span class="o">/</span><span class="w">      </span><span class="o">/</span><span class="w">     </span><span class="o">/</span><span class="w">     </span><span class="o">/</span><span class="w">     </span><span class="o">/</span><span class="w">     </span><span class="o">/</span><span class="w">     </span><span class="o">/</span><span class="w">      </span><span class="o">/</span>
<span class="w">        </span><span class="o">/-----/------/-----/-----/-----/-----/-----/------/</span>
<span class="w">       </span><span class="o">/</span><span class="w">     </span><span class="o">/</span><span class="w">      </span><span class="o">/</span><span class="w">     </span><span class="o">/</span><span class="w">     </span><span class="o">/</span><span class="w">     </span><span class="o">/</span><span class="w">     </span><span class="o">/</span><span class="w">     </span><span class="o">/</span><span class="w">      </span><span class="o">/</span>
<span class="w">      </span><span class="o">/-----/------/-----/-----/-----/-----/-----/------/</span><span class="w">           </span><span class="nv">fine</span><span class="w"> </span><span class="nv">level</span>
<span class="w">     </span><span class="o">/</span><span class="w">     </span><span class="o">/</span><span class="w">      </span><span class="o">/</span><span class="w">     </span><span class="o">/</span><span class="w">     </span><span class="o">/</span><span class="w">     </span><span class="o">/</span><span class="w">     </span><span class="o">/</span><span class="w">     </span><span class="o">/</span><span class="w">      </span><span class="o">/</span>
<span class="w">    </span><span class="o">/-----/------/-----/-----/-----/-----/-----/------/</span>
<span class="w">   </span><span class="o">/</span><span class="w">     </span><span class="o">/</span><span class="w">      </span><span class="o">/</span><span class="w">     </span><span class="o">/</span><span class="w">     </span><span class="o">/</span><span class="w">     </span><span class="o">/</span><span class="w">     </span><span class="o">/</span><span class="w">     </span><span class="o">/</span><span class="w">      </span><span class="o">/</span>
<span class="w">  </span><span class="o">--------------------------------------------------</span>
<span class="w">      </span><span class="nv">fluid</span><span class="w"> </span><span class="nv">elements</span><span class="w">      </span><span class="o">/</span><span class="w">      </span><span class="nv">halo</span><span class="w"> </span><span class="nv">from</span><span class="w"> </span><span class="nv">coarser</span>
<span class="w">                         </span><span class="o">/</span><span class="w">          </span><span class="nv">elements</span>
<span class="w">             </span><span class="nv">receive</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">compute</span><span class="w"> </span><span class="nv">face</span>
</code></pre></div>

<h3 id="example-rank-setup-2_1">Example Rank Setup 2</h3>
<p>In this situation rank 0 holds the coarsest element.
The finer elements are distributed across two other ranks (1 and 2).</p>
<div class="codehilite"><pre><span></span><code><span class="c">          </span><span class="nb">---------------------------------------------------</span>
<span class="c">         /     /      /     /  2  /                        /</span>
<span class="c">        /</span><span class="nb">-----</span><span class="c">/</span><span class="nb">------</span><span class="c">/</span><span class="nb">-----</span><span class="c">/</span><span class="nb">-----</span><span class="c">/                        /</span>
<span class="c">       /     /      /     /  1  /                        /</span>
<span class="c">      /</span><span class="nb">-----</span><span class="c">/</span><span class="nb">------</span><span class="c">/</span><span class="nb">-----</span><span class="c">/</span><span class="nb">-----</span><span class="c">/           0            /</span>
<span class="c">     /     /      /     /  1  /                        /</span>
<span class="c">    /</span><span class="nb">-----</span><span class="c">/</span><span class="nb">------</span><span class="c">/</span><span class="nb">-----</span><span class="c">/</span><span class="nb">-----</span><span class="c">/                        /</span>
<span class="c">   /     /      /     /  1  /                        /</span>
<span class="c">  </span><span class="nb">--------------------------------------------------</span>
</code></pre></div>

<h4 id="layout-on-rank-0_4">Layout on rank 0:</h4>
<p>Please notice, that in this situation rank 0 is interpolating the
face information downwards to the fine level before sending the
face information to rank 1 and 2.
Overall, on rank 0 the sitation looks like this:</p>
<div class="codehilite"><pre><span></span><code><span class="w">          </span><span class="o">---------------------------------------------------</span>
<span class="w">         </span><span class="o">/</span><span class="w">                        </span><span class="o">/</span><span class="w">                        </span><span class="o">/</span>
<span class="w">        </span><span class="o">/</span><span class="w">                        </span><span class="o">/</span><span class="w">                        </span><span class="o">/</span>
<span class="w">       </span><span class="o">/</span><span class="w">                        </span><span class="o">/</span><span class="w">                        </span><span class="o">/</span><span class="w">        </span><span class="nv">coarse</span><span class="w"> </span><span class="nv">level</span>
<span class="w">      </span><span class="o">/</span><span class="w">                        </span><span class="o">/</span><span class="w">                        </span><span class="o">/</span>
<span class="w">     </span><span class="o">/</span><span class="w">                        </span><span class="o">/</span><span class="w">                        </span><span class="o">/</span>
<span class="w">    </span><span class="o">/</span><span class="w">                        </span><span class="o">/</span><span class="w">                        </span><span class="o">/</span>
<span class="w">   </span><span class="o">/</span><span class="w">                        </span><span class="o">/</span><span class="w">                        </span><span class="o">/</span>
<span class="w">  </span><span class="o">--------------------------------------------------</span>
<span class="w">      </span><span class="nv">ghost</span><span class="w"> </span><span class="nv">from</span><span class="w"> </span><span class="nv">finer</span><span class="w">    </span><span class="o">/</span><span class="w">        </span><span class="nv">fluid</span><span class="w"> </span><span class="nv">element</span>
<span class="w">       </span><span class="nv">element</span><span class="w">           </span><span class="o">/</span>
<span class="w">                 </span><span class="nv">from</span><span class="w"> </span><span class="nv">finer</span><span class="w"> </span><span class="nv">face</span>

<span class="w">          </span><span class="o">---------------------------------------------------</span>
<span class="w">         </span><span class="o">/</span><span class="w">            </span><span class="o">/</span><span class="w">           </span><span class="o">/</span><span class="w">           </span><span class="o">/</span><span class="w">            </span><span class="o">/</span>
<span class="w">        </span><span class="o">/</span><span class="w">            </span><span class="o">/</span><span class="w">           </span><span class="o">/</span><span class="w">           </span><span class="o">/</span><span class="w">            </span><span class="o">/</span>
<span class="w">       </span><span class="o">/</span><span class="w">            </span><span class="o">/</span><span class="w">           </span><span class="o">/</span><span class="w">           </span><span class="o">/</span><span class="w">            </span><span class="o">/</span>
<span class="w">      </span><span class="o">/------------/-----------/-----------/------------/</span><span class="w">   </span><span class="nv">intermediate</span><span class="w"> </span><span class="nv">level</span>
<span class="w">     </span><span class="o">/</span><span class="w">            </span><span class="o">/</span><span class="w">           </span><span class="o">/</span><span class="w">           </span><span class="o">/</span><span class="w">            </span><span class="o">/</span>
<span class="w">    </span><span class="o">/</span><span class="w">            </span><span class="o">/</span><span class="w">           </span><span class="o">/</span><span class="w">           </span><span class="o">/</span><span class="w">            </span><span class="o">/</span>
<span class="w">   </span><span class="o">/</span><span class="w">            </span><span class="o">/</span><span class="w">           </span><span class="o">/</span><span class="w">           </span><span class="o">/</span><span class="w">            </span><span class="o">/</span>
<span class="w">  </span><span class="o">--------------------------------------------------</span>
<span class="w">      </span><span class="nv">ghost</span><span class="w"> </span><span class="nv">from</span><span class="w"> </span><span class="nv">finer</span><span class="w">    </span><span class="o">/</span><span class="w">       </span><span class="nv">ghost</span><span class="w"> </span><span class="nv">from</span><span class="w"> </span><span class="nv">coarser</span>
<span class="w">        </span><span class="nv">elements</span><span class="w">         </span><span class="o">/</span><span class="w">            </span><span class="nv">elements</span>
<span class="w">                   </span><span class="nv">from</span><span class="w"> </span><span class="nv">finer</span><span class="w"> </span><span class="nv">face</span>

<span class="w">          </span><span class="o">---------------------------------------------------</span>
<span class="w">         </span><span class="o">/</span><span class="w">     </span><span class="o">/</span><span class="w">      </span><span class="o">/</span><span class="w">     </span><span class="o">/</span><span class="w">     </span><span class="o">/</span><span class="w">     </span><span class="o">/</span><span class="w">     </span><span class="o">/</span><span class="w">     </span><span class="o">/</span><span class="w">      </span><span class="o">/</span>
<span class="w">        </span><span class="o">/-----/------/-----/-----/-----/-----/-----/------/</span>
<span class="w">       </span><span class="o">/</span><span class="w">     </span><span class="o">/</span><span class="w">      </span><span class="o">/</span><span class="w">     </span><span class="o">/</span><span class="w">     </span><span class="o">/</span><span class="w">     </span><span class="o">/</span><span class="w">     </span><span class="o">/</span><span class="w">     </span><span class="o">/</span><span class="w">      </span><span class="o">/</span>
<span class="w">      </span><span class="o">/-----/------/-----/-----/-----/-----/-----/------/</span><span class="w">           </span><span class="nv">fine</span><span class="w"> </span><span class="nv">level</span>
<span class="w">     </span><span class="o">/</span><span class="w">     </span><span class="o">/</span><span class="w">      </span><span class="o">/</span><span class="w">     </span><span class="o">/</span><span class="w">     </span><span class="o">/</span><span class="w">     </span><span class="o">/</span><span class="w">     </span><span class="o">/</span><span class="w">     </span><span class="o">/</span><span class="w">      </span><span class="o">/</span>
<span class="w">    </span><span class="o">/-----/------/-----/-----/-----/-----/-----/------/</span>
<span class="w">   </span><span class="o">/</span><span class="w">     </span><span class="o">/</span><span class="w">      </span><span class="o">/</span><span class="w">     </span><span class="o">/</span><span class="w">     </span><span class="o">/</span><span class="w">     </span><span class="o">/</span><span class="w">     </span><span class="o">/</span><span class="w">     </span><span class="o">/</span><span class="w">      </span><span class="o">/</span>
<span class="w">  </span><span class="o">--------------------------------------------------</span>
<span class="w">      </span><span class="nv">halo</span><span class="w"> </span><span class="nv">elements</span><span class="w">       </span><span class="o">/</span><span class="w">      </span><span class="nv">ghost</span><span class="w"> </span><span class="nv">from</span><span class="w"> </span><span class="nv">coarser</span>
<span class="w">                         </span><span class="o">/</span><span class="w">          </span><span class="nv">elements</span>
<span class="w">                     </span><span class="k">send</span><span class="w"> </span><span class="nv">face</span>
</code></pre></div>

<h4 id="layout-on-rank-1_4">Layout on rank 1:</h4>
<p>Rank 1 will receive the face information on the finest element level and
computes it.
However, it will NOT do any interpolation for the remote rank 0.</p>
<div class="alert alert-info">
<p class="alert-title h4">Note</p>
<p>This is in contrast to the level descriptor where the elements are
communicating on the coarsest element level. The faces will always communicate
on the finest level.</p>
</div>
<div class="codehilite"><pre><span></span><code><span class="w">                               </span><span class="o">--------</span>
<span class="w">                                  </span><span class="o">/</span>
<span class="w">                                 </span><span class="o">/</span>
<span class="w">                                </span><span class="o">/</span><span class="w">                                 </span><span class="nv">coarse</span><span class="w"> </span><span class="nv">level</span>
<span class="w">                               </span><span class="o">/</span>
<span class="w">                              </span><span class="o">/</span>
<span class="w">                             </span><span class="o">/</span>
<span class="w">   </span><span class="o">/</span><span class="w">                        </span><span class="o">/</span><span class="w">                        </span><span class="o">/</span>
<span class="w">  </span><span class="o">--------------------------------------------------</span>
<span class="w">     </span><span class="nv">not</span><span class="w"> </span><span class="nv">existing</span><span class="w"> </span><span class="nv">elem</span>.<span class="w">   </span><span class="o">/</span><span class="w">   </span><span class="nv">not</span><span class="w"> </span><span class="nv">existing</span><span class="w"> </span><span class="nv">elem</span>.
<span class="w">                         </span><span class="o">/</span>
<span class="w">                 </span><span class="nv">no</span><span class="w"> </span><span class="nv">action</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nv">this</span><span class="w"> </span><span class="nv">face</span>

<span class="w">          </span><span class="o">--</span><span class="w">                    </span><span class="o">------</span>
<span class="w">         </span><span class="o">/</span><span class="w">                        </span><span class="o">/</span>
<span class="w">             </span><span class="nv">not</span><span class="w"> </span><span class="nv">existing</span><span class="w"> </span><span class="nv">elem</span>.<span class="w">  </span><span class="o">/</span>
<span class="w">       </span><span class="o">/</span><span class="w">                        </span><span class="o">/</span>
<span class="w">      </span><span class="o">/------------/-----------/--</span><span class="w">                          </span><span class="nv">intermediate</span><span class="w"> </span><span class="nv">level</span>
<span class="w">     </span><span class="o">/</span><span class="w">            </span><span class="o">/</span><span class="w">           </span><span class="o">/</span>
<span class="w">    </span><span class="o">/</span><span class="w">            </span><span class="o">/</span><span class="w">           </span><span class="o">/</span>
<span class="w">   </span><span class="o">/</span><span class="w">            </span><span class="o">/</span><span class="w">           </span><span class="o">/</span><span class="w">           </span><span class="o">/</span><span class="w">            </span><span class="o">/</span>
<span class="w">  </span><span class="o">--------------------------------------------------</span>
<span class="w">      </span><span class="nv">ghost</span><span class="w"> </span><span class="nv">from</span><span class="w"> </span><span class="nv">finer</span><span class="w">    </span><span class="o">/</span><span class="w">       </span><span class="nv">not</span><span class="w"> </span><span class="nv">existing</span><span class="w"> </span><span class="nv">elem</span>.
<span class="w">        </span><span class="nv">elements</span><span class="w">         </span><span class="o">/</span>
<span class="w">                </span><span class="nv">no</span><span class="w"> </span><span class="nv">action</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nv">this</span><span class="w"> </span><span class="nv">face</span>

<span class="w">          </span><span class="o">--</span><span class="w">                    </span><span class="o">------</span><span class="w">                   </span><span class="o">----</span>
<span class="w">                                  </span><span class="o">/</span><span class="w">                        </span><span class="o">/</span>
<span class="w">        </span><span class="o">/-----/------/-----/-----/-----/-----/-----/------/</span>
<span class="w">       </span><span class="o">/</span><span class="w">     </span><span class="o">/</span><span class="w">      </span><span class="o">/</span><span class="w">     </span><span class="o">/</span><span class="w">     </span><span class="o">/</span><span class="w">     </span><span class="o">/</span><span class="w">     </span><span class="o">/</span><span class="w">     </span><span class="o">/</span><span class="w">      </span><span class="o">/</span>
<span class="w">      </span><span class="o">/-----/------/-----/-----/-----/-----/-----/------/</span><span class="w">           </span><span class="nv">fine</span><span class="w"> </span><span class="nv">level</span>
<span class="w">     </span><span class="o">/</span><span class="w">     </span><span class="o">/</span><span class="w">      </span><span class="o">/</span><span class="w">     </span><span class="o">/</span><span class="w">     </span><span class="o">/</span><span class="w">     </span><span class="o">/</span><span class="w">     </span><span class="o">/</span><span class="w">     </span><span class="o">/</span><span class="w">      </span><span class="o">/</span>
<span class="w">    </span><span class="o">/-----/------/-----/-----/-----/-----/-----/------/</span>
<span class="w">   </span><span class="o">/</span><span class="w">     </span><span class="o">/</span><span class="w">      </span><span class="o">/</span><span class="w">     </span><span class="o">/</span><span class="w">     </span><span class="o">/</span><span class="w">     </span><span class="o">/</span><span class="w">     </span><span class="o">/</span><span class="w">     </span><span class="o">/</span><span class="w">      </span><span class="o">/</span>
<span class="w">  </span><span class="o">--------------------------------------------------</span>
<span class="w">      </span><span class="nv">fluid</span><span class="w"> </span><span class="nv">elements</span><span class="w">      </span><span class="o">/</span><span class="w">      </span><span class="nv">halo</span><span class="w"> </span><span class="nv">from</span><span class="w"> </span><span class="nv">coarser</span>
<span class="w">                         </span><span class="o">/</span><span class="w">          </span><span class="nv">elements</span>
<span class="w">             </span><span class="nv">receive</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">compute</span><span class="w"> </span><span class="nv">face</span>
</code></pre></div>

<h4 id="layout-on-rank-2_2">Layout on rank 2:</h4>
<p>Rank 2 will receive face information on the finest level, but is not doing
any interpolation for the remote rank 0.
The situation looks like this:</p>
<div class="codehilite"><pre><span></span><code>          ---------------------------------------------------
         /                        /                        /
        /                        /                        /
       /                        /                        /        coarse level
      /                        /                        /
     /                        /                        /
    /                        /                        /
   /                        /                        /
  --------------------------------------------------
    not existing elem.    /     not existing elem.
                         /
                 no action face

          ---        ----       ------       ----         ---
         /            /           /           /            /
                                 /
       /            /           /           /            /
      /--        --/-        --/--       --/--        --/   intermediate level
                  /           /           /            /
                             /
   /            /           /           /            /
  -----------------------------      ------      ---
      not existing elem.  /       not existing elem.
                         /
                   no action face

          ---------------------------------------------------
         /     /      /     /     /     /     /     /      /
        /-----/------/-----/-----/-----/-----/-----/------/
       /                        /                        /
      /---                  ---/--                    --/           fine level
     /                        /                        /
    /--                    --/--                    --/
   /                        /                        /
  --------------------------------------------------
      fluid element       /      halo from coarser
                         /          elements
                receive and compute face
</code></pre></div>

<h2 id="more-complex-level-jumps">More complex level jumps</h2>
<p>Of course, in general much more complex situations may arise in a realistic
mesh. However, these situations are covered by the upper analysis, as the
algorithm creates the face description recursively. So, from one level to
another level every situation should reduce to one of the upper cases. By
this approach any mesh situation can be handled.</p>
    </div>
  </div>
      <hr>
    </div> <!-- /container -->
    <footer>
      <div class="container">
        <div class="row justify-content-between">
          <div class="col">
            <p>
              Treelm
 was developed by University of Siegen<br>              &copy; 2025 
<br /><small>75d5a154054a</small></p>
          </div>
          <div class="col">
            <p class="text-end">
              Documentation generated by
              <a href="https://github.com/Fortran-FOSS-Programmers/ford">FORD</a>
 on 2025-04-28T13:48:22.107063+0000             </p>
          </div>
        </div>
        <br>
      </div> <!-- /container -->
    </footer>
  </body>
</html>